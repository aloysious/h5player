<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
	<meta content="yes" name="apple-mobile-web-app-capable" />
	<meta content="black" name="apple-mobile-web-app-status-bar-style" />
	<meta content="telephone=no" name="format-detection" />
    <title>demo</title>
    <link rel="stylesheet" href="http://a.tbcdn.cn/s/kissy/1.3.0/css/dpl/base-min.css" />
    <script src="http://a.tbcdn.cn/s/kissy/1.3.0/kissy-min.js" charset="utf-8"></script>
</head>
<body>
	<h2>h5player DEMO</h2>
	<div id="J_player"></div>
	<video  id="vdo" src="blob:http%3A//www.youtube.com/dfa1e10d-1163-4bbb-ae68-04c26a12398f" controls></video>

	<script>

		/*
		var oReq = new XMLHttpRequest();
		oReq.open('GET', './oceans-clip.mp4', true);
		oReq.responseType = 'arraybuffer';

		oReq.onload = function(oEvent) {
			var blob = new Blob([oReq.response], {type: 'video/mp4'});

			var url = URL.createObjectURL(blob);
			var video = document.getElementById('vdo');

			video.src = url;

			video.addEventListener('progress', function() {
				console.log(video.buffered.end(0));
			});
		};

		oReq.send();
		*/
		var video = document.getElementById('vdo');
		video.addEventListener('progress', function() {
			if (video.duration) {
				console.log(video.buffered.length);
				for (var i=0,j=video.buffered.length; i<j; i++) {
					console.log('start:' + video.buffered.start(i) + ', end:' + video.buffered.end(i));
				}
			}
		});
</script>
</body>
</html>
